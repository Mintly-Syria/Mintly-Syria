<!DOCTYPE html>
<html lang="ar" dir="rtl" data-theme="dark">
<head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mintly Syria -Ù…Ø­ÙˆÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Øª</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;600;700;900&display=swap" rel="stylesheet">

    <style>
        /* === Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø£Ù„ÙˆØ§Ù† === */
        :root {
            /* Light Mode */
            --bg-body: #f0f2f5;
            --bg-card: #ffffff;
            --bg-header: #ffffff;
            --bg-input: #f4f6f8;
            --text-main: #2c3e50;
            --text-input: #2c3e50;
            --text-muted: #7f8c8d;
            --border: #e0e0e0;
            --accent: #d4a017; 
            --accent-hover: #b8940f;
            --accent-glow: rgba(212, 160, 23, 0.2);
            --result-color: #d4a017;
            --radius: 18px;
            --font-numbers: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            --header-height: 80px;
            --shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        /* Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ† (Dark Mode) */
        [data-theme="dark"] {
            --bg-body: #0f0f0f;
            --bg-card: #1a1a1a;
            --bg-header: #141414;
            --bg-input: #252525;
            --text-main: #ffd700;
            --text-input: #ffd700;
            --text-muted: #b0b0b0;
            --border: #333;
            --accent: #ffb700;
            --accent-hover: #ffcc00;
            --accent-glow: rgba(255, 183, 0, 0.15);
            --result-color: #ffd700;
            --shadow: 0 20px 40px rgba(0,0,0,0.7);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Cairo', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            background-color: var(--bg-body);
            background-image: radial-gradient(circle at 50% -20%, var(--accent-glow) 0%, transparent 60%);
            background-attachment: fixed;
            color: var(--text-main);
            min-height: 100vh;
            width: 100%;
            padding-top: calc(var(--header-height) + 20px);
            padding-bottom: 20px;
            overflow-x: hidden;
            transition: background-color 0.3s, color 0.3s;
        }

        /* === Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ (Header) === */
        .main-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: var(--header-height);
            background-color: var(--bg-header);
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 1000;
            box-shadow: var(--shadow);
            transition: background-color 0.3s, border-color 0.3s;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .header-logo {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--accent);
            box-shadow: 0 0 15px var(--accent-glow);
            cursor: pointer;
            transition: transform 0.3s;
        }
        .header-logo:hover { transform: scale(1.05); }

        .brand-text {
            font-size: 1.2rem;
            font-weight: 900;
            color: var(--accent);
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: none; 
        }
        
        .theme-toggle {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-main);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.2rem;
        }
        .theme-toggle:hover {
            background-color: var(--bg-input);
            border-color: var(--accent);
            color: var(--accent);
        }

        .header-nav {
            display: flex;
            gap: 8px;
        }

        .nav-btn {
            background: rgba(128, 128, 128, 0.1);
            border: 1px solid transparent;
            color: var(--text-muted);
            padding: 8px 14px;
            border-radius: 30px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
            white-space: nowrap;
        }

        .nav-btn.active {
            background: var(--accent);
            color: #000;
            box-shadow: 0 2px 10px var(--accent-glow);
            font-weight: 800;
        }

        /* === Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© === */
        .app-container {
            width: 100%;
            max-width: 480px;
            min-height: 60vh; 
            height: auto;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 20px; 
            box-shadow: var(--shadow);
            margin: 0 auto;
            position: relative;
            display: flex;
            flex-direction: column; 
            overflow: visible;
            transition: background-color 0.3s, border-color 0.3s;
        }

        h1 {
            text-align: center;
            font-weight: 900;
            font-size: 1.5rem; 
            margin-bottom: 15px; 
            color: var(--text-main);
            text-shadow: 0 0 10px var(--accent-glow);
            letter-spacing: -0.5px;
            flex-shrink: 0;
            user-select: none;
        }

        /* --- Views --- */
        .view-section {
            display: none;
            flex-direction: column;
            height: auto;
            overflow: visible;
            position: relative;
        }
        
        .view-section.active-view {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .scrollable-area {
            display: block;
            overflow: visible;
            height: auto;
            width: 100%;
        }
        
        .content-wrapper {
            display: flex;
            flex-direction: column;
            padding-bottom: 20px;
        }
        
        .input-group { margin-bottom: 10px; position: relative; }
        
        label {
            display: block;
            color: var(--text-muted);
            font-size: 0.8rem;
            margin-bottom: 4px;
            font-weight: 600;
            padding-right: 5px;
            user-select: none;
        }

        .styled-input, .styled-select {
            width: 100%;
            background: var(--bg-input);
            border: 2px solid var(--border);
            color: var(--text-input);
            padding: 12px 15px; 
            border-radius: var(--radius);
            font-size: 1rem;
            font-weight: 600;
            font-family: 'Cairo', sans-serif;
            direction: ltr;
            text-align: right;
            outline: none;
            transition: border-color 0.3s;
            appearance: none; /* For selects */
            -moz-appearance: textfield;
        }
        
        .styled-select {
            background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23ffd700%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E");
            background-repeat: no-repeat;
            background-position: left .7em top 50%;
            background-size: .65em auto;
            cursor: pointer;
        }

        .styled-input::-webkit-outer-spin-button,
        .styled-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .styled-input:focus, .styled-select:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px var(--accent-glow);
        }

        /* --- Custom Select Logic --- */
        .custom-select-wrapper { position: relative; user-select: none; width: 100%; z-index: 100; }
        .custom-select { position: relative; display: flex; flex-direction: column; }
        
        .custom-select__trigger {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 15px; 
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-main);
            background: var(--bg-input);
            border: 2px solid var(--border);
            border-radius: var(--radius);
            cursor: pointer;
            transition: all 0.3s;
        }

        .custom-select__trigger:hover { border-color: var(--border); }
        .custom-select.open .custom-select__trigger {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px var(--accent-glow);
        }

        .arrow { font-size: 0.7rem; color: var(--text-muted); transition: transform 0.3s; pointer-events: none;}
        .custom-select.open .arrow { transform: rotate(180deg); }

        .custom-options {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            width: 90%;
            max-width: 350px;
            background: var(--bg-card);
            border: 2px solid var(--accent);
            border-radius: 20px;
            box-shadow: 0 0 0 1000px rgba(0,0,0,0.8);
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            transition: all 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
            z-index: 99999;
            display: flex;
            flex-direction: column;
            padding-bottom: 10px;
        }
        .custom-select.open .custom-options {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
            visibility: visible;
            pointer-events: all;
        }

        .custom-option {
            position: relative;
            display: flex;
            align-items: center;
            padding: 15px 20px;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 1px solid rgba(128,128,128,0.1);
        }
        .custom-option:last-child { border-bottom: none; }
        .custom-option:hover {
            background-color: var(--accent-glow);
            color: var(--text-main);
            padding-right: 25px;
        }
        .custom-option.selected {
            color: var(--accent);
            background-color: var(--accent-glow);
        }

        .flag-icon {
            width: 32px;
            height: 24px;
            object-fit: contain; 
            border-radius: 4px;
            margin-left: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
            background-color: #333;
            pointer-events: none;
        }

        .currency-text { flex: 1; text-align: right; direction: ltr; pointer-events: none;}
        .ar-name {
            display: block;
            color: var(--text-muted);
            font-size: 0.8em;
            margin-top: 3px;
            direction: rtl; 
            text-align: right;
        }

        .swap-row { display: flex; justify-content: center; margin: -5px 0 10px 0; position: relative; z-index: 1; }
        .btn-swap {
            width: 40px;
            height: 40px; 
            border-radius: 50%;
            background: var(--bg-card);
            border: 2px solid var(--border);
            color: var(--text-muted);
            font-size: 1.1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        .btn-swap:hover {
            color: var(--accent);
            border-color: var(--accent);
            transform: rotate(180deg) scale(1.1);
            box-shadow: 0 0 15px var(--accent-glow);
        }

        .footer-actions {
            margin-top: 20px; 
        }

        .btn-convert {
            width: 100%;
            padding: 14px; 
            background: linear-gradient(135deg, var(--accent), var(--accent-hover));
            color: #000;
            border: none;
            border-radius: var(--radius);
            font-size: 1.1rem;
            font-weight: 800;
            cursor: pointer;
            margin-top: 5px;
            box-shadow: 0 5px 15px -5px var(--accent-glow);
            transition: transform 0.2s, box-shadow 0.2s;
            user-select: none;
        }
        .btn-convert:active { transform: scale(0.98); }

        .result-box {
            margin-top: 10px; 
            padding-top: 15px;
            border-top: 1px solid var(--border);
            text-align: center;
            opacity: 0;
            transform: translateY(15px);
            transition: all 0.5s;
        }
        .result-box.show { opacity: 1; transform: translateY(0); }

        /* === Styles for Dual Rate (New) === */
        .dual-result-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 10px;
            width: 100%;
        }

        .rate-card {
            background: var(--bg-input);
            border: 2px solid var(--border);
            border-radius: var(--radius);
            padding: 15px 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s, border-color 0.2s;
            position: relative;
            overflow: hidden;
        }
        
        .rate-card:hover { transform: translateY(-2px); }
        
        .rate-card.buy { border-color: rgba(46, 204, 113, 0.5); } /* Greenish border */
        .rate-card.sell { border-color: rgba(231, 76, 60, 0.5); } /* Reddish border */

        .rate-label {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-bottom: 8px;
            font-weight: 700;
            text-transform: uppercase;
        }
        
        .rate-value {
            font-size: 1.4rem;
            font-weight: 900;
            font-family: var(--font-numbers);
            direction: ltr;
            line-height: 1.2;
        }

        .rate-card.buy .rate-value { color: #2ecc71; text-shadow: 0 0 10px rgba(46, 204, 113, 0.2); } /* Green */
        .rate-card.sell .rate-value { color: #e74c3c; text-shadow: 0 0 10px rgba(231, 76, 60, 0.2); } /* Red */
        
        .single-result-container {
            width: 100%;
            padding: 10px 0;
        }
        
        .result-amount {
            font-size: 2.2rem; 
            font-weight: 900;
            color: var(--result-color);
            line-height: 1.1;
            margin-bottom: 2px;
            text-shadow: 0 0 20px var(--accent-glow);
            font-family: var(--font-numbers);
            word-break: break-all;
        }
        .rate-display {
            font-size: 0.8rem;
            color: var(--text-muted);
            background: var(--bg-input);
            padding: 4px 12px;
            border-radius: 50px;
            border: 1px solid var(--border);
            display: inline-block;
            margin-top: 5px;
        }

        .refresh-btn {
            background: transparent;
            border: 1px solid var(--accent);
            color: var(--accent);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            cursor: pointer;
            margin-bottom: 15px;
            align-self: flex-end;
            display: flex;
            align-items: center;
            gap: 5px;
            user-select: none;
        }
        .refresh-btn:hover { background: var(--accent); color: #000; }
        .refresh-btn svg { width: 14px; height: 14px; pointer-events: none; }

        /* --- Metal Cards --- */
        .metal-card {
            background: var(--bg-input);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
            user-select: none;
        }
        .metal-card.gold { border-color: #ffd700; }
        .metal-card.silver { border-color: #c0c0c0; }
        
        .metal-icon { font-size: 2rem; margin-bottom: 10px; }
        .metal-title { font-size: 1.2rem; font-weight: 700; margin-bottom: 15px; }
        .gold .metal-title { color: #ffd700; }
        .silver .metal-title { color: #e0e0e0; }

        .price-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(128,128,128,0.1);
            font-family: var(--font-numbers);
            font-weight: 600;
        }
        .price-row:last-child { border-bottom: none; }
        .price-label { color: var(--text-muted); font-size: 0.9rem; }
        .price-value { font-size: 1rem; color: var(--text-main); }

        /* --- Gold Calculator Specifics --- */
        .calc-row {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }
        .calc-row .input-group {
            flex: 1;
            margin-bottom: 0;
        }

        /* --- Utils --- */
        .loader {
            display: none;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(0,0,0,0.3);
            border-radius: 50%;
            border-top-color: #000;
            animation: spin 0.8s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--bg-card);
            color: var(--text-main);
            border: 1px solid var(--accent);
            padding: 10px 20px;
            border-radius: 50px;
            font-weight: 700;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
            transition: 0.4s;
            z-index: 100000;
            font-size: 0.85rem;
            pointer-events: none;
        }
        .toast.active { transform: translateX(-50%) translateY(0); }

        .close-modal {
            text-align: center;
            padding: 15px;
            color: var(--accent);
            font-size: 1.2rem;
            cursor: pointer;
            border-bottom: 1px solid var(--border);
            margin-bottom: 0px;
            flex-shrink: 0;
            user-select: none;
        }
        
        .section-loader {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: var(--text-muted);
            min-height: 200px;
        }
        
        @media (min-width: 400px) {
            .brand-text { display: block; }
        }
    </style>
</head>
<body>

    <!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <header class="main-header">
        <div class="header-left">
            
            <span class="brand-text">Mintly Syria</span>
        </div>
        
        <nav class="header-nav">
            <button class="nav-btn active" onclick="switchView('home', this)">Ø¹Ù…Ù„Ø§Øª</button>
            <button class="nav-btn" onclick="switchView('gold', this)">Ø§Ù„Ø°Ù‡Ø¨</button>
        </nav>

        <button class="theme-toggle" id="themeToggle" onclick="toggleTheme()">
            <span id="themeIcon">â˜€ï¸</span>
        </button>
    </header>

    <!-- Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
    <div class="app-container">

        <!-- Ø§Ù„Ù‚Ø³Ù… 1: Ø§Ù„Ù…Ø­ÙˆÙ„ -->
        <div id="view-home" class="view-section active-view">
            <h1>Ù…Ø­ÙˆÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Øª</h1>
            
            <div class="scrollable-area">
                <div class="content-wrapper">
                    <div class="input-group">
                        <label>Ø§Ù„Ù…Ø¨Ù„Øº (Amount)</label>
                        <input type="number" id="amount" class="styled-input" value="100" placeholder="0.00" lang="en" inputmode="decimal">
                    </div>

                    <div class="input-group">
                        <label>Ù…Ù† (From)</label>
                        <div class="custom-select-wrapper">
                            <div class="custom-select" id="fromSelect">
                                <div class="custom-select__trigger">
                                    <span>Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…Ù„Ø©</span>
                                    <span class="arrow">â–¼</span>
                                </div>
                                <div class="custom-options"></div>
                            </div>
                        </div>
                    </div>

                    <div class="swap-row">
                        <button class="btn-swap" id="swapBtn">â‡„</button>
                    </div>

                    <div class="input-group">
                        <label>Ø¥Ù„Ù‰ (To)</label>
                        <div class="custom-select-wrapper">
                            <div class="custom-select" id="toSelect">
                                <div class="custom-select__trigger">
                                    <span>Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…Ù„Ø©</span>
                                    <span class="arrow">â–¼</span>
                                </div>
                                <div class="custom-options"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="footer-actions">
                <button class="btn-convert" id="convertBtn">
                    <span class="btn-text">ØªØ­ÙˆÙŠÙ„</span>
                    <div class="loader" id="loader"></div>
                </button>

                <div class="result-box" id="resultBox">
                    
                    <!-- Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…Ø²Ø¯ÙˆØ¬Ø© (Ù„Ù„Ø¯ÙˆÙ„Ø§Ø± ÙÙ‚Ø· -> Ø¹Ù…Ù„Ø© Ø£Ø®Ø±Ù‰) -->
                    <div id="dualResult" style="display: none; width: 100%;">
                        <div class="dual-result-grid">
                            <div class="rate-card sell">
                                <span class="rate-label">Ø³Ø¹Ø± Ø§Ù„Ù…Ø¨ÙŠØ¹</span>
                                <span class="rate-value" id="resSell">0.00</span>
                            </div>
                            <div class="rate-card buy">
                                <span class="rate-label">Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡</span>
                                <span class="rate-value" id="resBuy">0.00</span>
                            </div>
                        </div>
                        <div class="rate-display" id="dualRateDisplay" lang="en">1 USD = --- USD</div>
                    </div>

                    <!-- Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…ÙØ±Ø¯Ø© (Ù„Ù„Ø¨Ù‚ÙŠØ©) -->
                    <div id="singleResult" style="display: none; width: 100%;" class="single-result-container">
                        <div class="result-amount" id="resultAmount" lang="en">0.00</div>
                        <div class="rate-display" id="rateDisplay" lang="en">1 SYP = --- TRY</div>
                    </div>

                </div>
            </div>
        </div>

        <!-- Ø§Ù„Ù‚Ø³Ù… 2: Ø§Ù„Ø°Ù‡Ø¨ -->
        <div id="view-gold" class="view-section">
            <div style="display:flex; flex-direction:column; width:100%;">
                <div style="flex-shrink: 0;">
                    <h1>Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ù…Ø¹Ø§Ø¯Ù†</h1>
                    
                    <button class="refresh-btn" onclick="fetchGoldAndSilver()">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 4v6h-6"></path><path d="M1 20v-6h6"></path><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg>
                        <span>ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¢Ù†</span>
                    </button>
                </div>

                <div id="gold-loader-container" class="section-loader" style="display:none">
                    <div class="loader" style="display:block; border-top-color:var(--accent); border-color:rgba(212, 160, 23, 0.3);"></div>
                    <div style="margin-right:10px">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„...</div>
                </div>

                <div class="scrollable-area">
                    <div id="gold-content" style="display:none;">
                        
                        <!-- --- Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø°Ù‡Ø¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© --- -->
                        <div class="metal-card gold" style="border-color: var(--accent);">
                            <div class="metal-title">Ø­Ø§Ø³Ø¨Ø© Ù‚ÙŠÙ…Ø© Ø§Ù„Ø°Ù‡Ø¨</div>
                            
                            <div class="calc-row">
                                <div class="input-group">
                                    <label>Ø§Ù„ÙˆØ²Ù† (ØºØ±Ø§Ù…)</label>
                                    <input type="number" id="calc-weight" class="styled-input" placeholder="Ù…Ø«Ø§Ù„: 10" inputmode="decimal">
                                </div>
                                <div class="input-group">
                                    <label>Ø§Ù„Ø¹ÙŠØ§Ø±</label>
                                    <select id="calc-karat" class="styled-select">
                                        <option value="24">24 (Ø¹Ø§Ù„ÙŠ)</option>
                                        <option value="22" selected>22 (Ù…Ø³ØªØ¹Ù…Ù„)</option>
                                        <option value="21">21 (Ø³ÙˆØ±ÙŠ)</option>
                                        <option value="18">18</option>
                                        <option value="14">14</option>
                                    </select>
                                </div>
                            </div>

                            <div class="input-group">
                                <label>Ø§Ù„Ø¹Ù…Ù„Ø©</label>
                                <select id="calc-currency" class="styled-select">
                                    <option value="SYP">Ù„ÙŠØ±Ø© Ø³ÙˆØ±ÙŠØ© (SYP)</option>
                                    <option value="USD">Ø¯ÙˆÙ„Ø§Ø± Ø£Ù…Ø±ÙŠÙƒÙŠ (USD)</option>
                                    <option value="TRY">Ù„ÙŠØ±Ø© ØªØ±ÙƒÙŠØ© (TRY)</option>
                                </select>
                            </div>

                            <button class="btn-convert" onclick="calculateGoldValue()" style="margin-top:15px;">
                                <span class="btn-text">Ø§Ø­Ø³Ø¨ Ø§Ù„Ø³Ø¹Ø±</span>
                            </button>

                            <div class="result-box" id="calc-result-box" style="margin-top:15px; border-top:none; padding-top:5px;">
                                <div style="font-size:0.8rem; color:var(--text-muted); margin-bottom:5px;">Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠØ©:</div>
                                <div class="result-amount" id="calc-result-amount" lang="en">0.00</div>
                                <div class="rate-display" id="calc-currency-label" style="margin-top:5px;">SYP</div>
                            </div>
                        </div>

                        <!-- --- Ù‚Ø³Ù… Ø§Ù„Ø°Ù‡Ø¨ Ø§Ù„Ø³ÙˆÙ‚ÙŠ --- -->
                        <div class="metal-card gold">
                            <div class="metal-icon">ğŸ¥‡</div>
                            <div class="metal-title">Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©</div>
                            
                            <div class="price-row">
                                <span class="price-label">Ø£ÙˆÙ†ØµØ© (Ø¯ÙˆÙ„Ø§Ø±)</span>
                                <span class="price-value" id="gold-ounce-usd">---</span>
                            </div>
                            <div class="price-row">
                                <span class="price-label">ØºØ±Ø§Ù… 24 (Ø¯ÙˆÙ„Ø§Ø±)</span>
                                <span class="price-value" id="gold-gram-usd">---</span>
                            </div>
                            <div class="price-row" style="margin-top:5px; border-top:1px dashed var(--border); padding-top:5px;">
                                <span class="price-label">Ø£ÙˆÙ†ØµØ© (Ù„ÙŠØ±Ø© Ø³ÙˆØ±ÙŠØ©)</span>
                                <span class="price-value" id="gold-ounce-syp" style="color:var(--accent)">---</span>
                            </div>
                            <div class="price-row">
                                <span class="price-label">ØºØ±Ø§Ù… 21 (Ù„ÙŠØ±Ø© Ø³ÙˆØ±ÙŠØ©)</span>
                                <span class="price-value" id="gold-21-syp" style="color:var(--accent)">---</span>
                            </div>
                        </div>

                        <!-- Ù‚Ø³Ù… Ø§Ù„ÙØ¶Ø© -->
                        <div class="metal-card silver">
                            <div class="metal-icon">ğŸ¥ˆ</div>
                            <div class="metal-title">Ø§Ù„ÙØ¶Ø© (Silver)</div>
                            
                            <div class="price-row">
                                <span class="price-label">Ø£ÙˆÙ†ØµØ© (Ø¯ÙˆÙ„Ø§Ø±)</span>
                                <span class="price-value" id="silver-ounce-usd">---</span>
                            </div>
                            <div class="price-row">
                                <span class="price-label">ØºØ±Ø§Ù… (Ø¯ÙˆÙ„Ø§Ø±)</span>
                                <span class="price-value" id="silver-gram-usd">---</span>
                            </div>
                        </div>
                        
                        <p style="text-align:center; font-size:0.7rem; color:var(--text-muted); margin-top:20px; line-height:1.6; padding-bottom: 20px;">
                            * Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ØªÙ‚Ø±ÙŠØ¨ÙŠØ© ÙˆÙ‚Ø¯ ØªØ®ØªÙ„Ù Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ø¹Ù† Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ù…Ø­Ù„ÙŠ.<br>
                            * Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø°Ù‡Ø¨ ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ Ø§Ù„ÙÙˆØ±ÙŠ.
                        </p>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div class="toast" id="toast">Ø±Ø³Ø§Ù„Ø© ØªÙ†Ø¨ÙŠÙ‡</div>

    <script>
        // === Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø­ÙÙˆØ¸ ===
        const savedTheme = localStorage.getItem('theme') || 'dark';
        document.documentElement.setAttribute('data-theme', savedTheme);
        updateThemeIcon(savedTheme);

        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeIcon(newTheme);
        }

        function updateThemeIcon(theme) {
            const iconSpan = document.getElementById('themeIcon');
            iconSpan.textContent = theme === 'dark' ? 'ğŸŒ™' : 'â˜€ï¸';
        }

        // === Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Øª (Ø§Ù„Ø«Ù„Ø§Ø« ÙÙ‚Ø·) ===
        const allowedCurrencies = {
            'SYP': { name: 'Ù„ÙŠØ±Ø© Ø³ÙˆØ±ÙŠØ©', flag: 'https://flagcdn.com/w40/sy.png' },
            'TRY': { name: 'Ù„ÙŠØ±Ø© ØªØ±ÙƒÙŠØ©', flag: 'https://flagcdn.com/w40/tr.png' },
            'USD': { name: 'Ø¯ÙˆÙ„Ø§Ø± Ø£Ù…Ø±ÙŠÙƒÙŠ', flag: 'https://flagcdn.com/w40/us.png' }
        };

        // === Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© ===
        let selectedFrom = 'USD'; // Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…ÙŠØ²Ø©
        let selectedTo = 'SYP'; 
        let cachedRates = {}; 
        let currentGoldPriceUsdPerGram = 0; 

        // DOM Elements
        const amountInput = document.getElementById('amount');
        const convertBtn = document.getElementById('convertBtn');
        const swapBtn = document.getElementById('swapBtn');
        const loader = document.getElementById('loader');
        const btnText = document.querySelector('.btn-text');
        const resultBox = document.getElementById('resultBox');
        
        // Result Elements
        const singleResultDiv = document.getElementById('singleResult');
        const dualResultDiv = document.getElementById('dualResult');
        const resultAmount = document.getElementById('resultAmount');
        const resBuy = document.getElementById('resBuy');
        const resSell = document.getElementById('resSell');
        const rateDisplay = document.getElementById('rateDisplay');
        const dualRateDisplay = document.getElementById('dualRateDisplay');
        const toast = document.getElementById('toast');

        // === APIs ===
        const API_ENDPOINTS = [
            "https://api.exchangerate-api.com/v4/latest/USD", 
            "https://open.er-api.com/v6/latest/USD"
        ];

        async function fetchRatesWithFallback() {
            for (const apiUrl of API_ENDPOINTS) {
                try {
                    const response = await fetch(apiUrl, { cache: 'no-store' });
                    if (!response.ok) throw new Error("Network response was not ok");
                    const data = await response.json();
                    if (data.rates) {
                        return data.rates;
                    }
                } catch (error) {
                    console.warn(`API Error from ${apiUrl}, trying next...`);
                    continue;
                }
            }
            return null;
        }

        function switchView(viewName, btnElement) {
            document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active-view'));
            document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active'));

            document.getElementById(`view-${viewName}`).classList.add('active-view');
            
            if(btnElement) {
                btnElement.classList.add('active');
            } else {
                const index = ['home', 'gold'].indexOf(viewName);
                if(index >= 0) document.querySelectorAll('.nav-btn')[index].classList.add('active');
            }

            if(viewName === 'gold') {
                fetchGoldAndSilver();
            }
        }

        document.addEventListener('DOMContentLoaded', async () => {
            initCustomSelects();
            
            convertBtn.addEventListener('click', performConvert);
            amountInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') performConvert();
            });
            swapBtn.addEventListener('click', () => {
                swapBtn.style.transform = "rotate(180deg) scale(1.1)";
                setTimeout(() => swapBtn.style.transform = "rotate(0deg) scale(1)", 300);
                const temp = selectedFrom;
                selectOption('fromSelect', selectedTo);
                selectOption('toSelect', temp);
                performConvert();
            });
        });

        function initCustomSelects() {
            const codes = Object.keys(allowedCurrencies);
            
            const createListHTML = () => {
                let closeBtn = `<div class="close-modal">âœ• Ø¥ØºÙ„Ø§Ù‚</div>`;
                let list = codes.map(code => {
                    const currency = allowedCurrencies[code];
                    return `<span class="custom-option" data-value="${code}">
                            <img src="${currency.flag}" class="flag-icon">
                            <div class="currency-text"><strong>${code}</strong> <span class="ar-name">${currency.name}</span></div>
                        </span>`;
                }).join('');
                return closeBtn + list;
            };

            const listHTML = createListHTML();
            setupCustomSelect('fromSelect', listHTML, (val) => { selectedFrom = val; });
            setupCustomSelect('toSelect', listHTML, (val) => { selectedTo = val; });

            setTimeout(() => {
                selectOption('fromSelect', 'USD');
                selectOption('toSelect', 'SYP');
            }, 100);
        }

        function setupCustomSelect(elementId, htmlContent, callback) {
            const wrapper = document.getElementById(elementId);
            const trigger = wrapper.querySelector('.custom-select__trigger span:first-child');
            const optionsContainer = wrapper.querySelector('.custom-options');
            optionsContainer.innerHTML = htmlContent;

            const closeModal = () => {
                wrapper.classList.remove('open');
                wrapper.parentElement.style.zIndex = 1;
            };

            const openModal = () => {
                wrapper.classList.add('open');
                wrapper.parentElement.style.zIndex = 1000;
            };

            wrapper.querySelector('.custom-select__trigger').addEventListener('click', function(e) {
                e.stopPropagation();
                document.querySelectorAll('.custom-select').forEach(el => {
                    if (el !== wrapper) {
                        el.classList.remove('open');
                        el.parentElement.style.zIndex = 1;
                    }
                });
                if (wrapper.classList.contains('open')) closeModal();
                else openModal();
            });

            wrapper.querySelector('.close-modal').addEventListener('click', closeModal);

            wrapper.querySelectorAll('.custom-option').forEach(option => {
                option.addEventListener('click', function() {
                    const value = this.getAttribute('data-value');
                    const currencyData = allowedCurrencies[value];
                    const imgSrc = currencyData.flag;

                    trigger.innerHTML = `
                        <div style="display:flex; align-items:center;">
                            <img src="${imgSrc}" class="flag-icon" style="width:18px; height:13px; margin-left:8px;">
                            ${value} - ${currencyData.name}
                        </div>
                    `;
                    callback(value);
                    closeModal();
                });
            });
        }

        function selectOption(elementId, code) {
            const wrapper = document.getElementById(elementId);
            const option = wrapper.querySelector(`.custom-option[data-value="${code}"]`);
            if (option) option.click();
        }

        window.addEventListener('click', function(e) {
            if (!e.target.closest('.custom-select')) {
                document.querySelectorAll('.custom-select').forEach(el => {
                    el.classList.remove('open');
                    el.parentElement.style.zIndex = 1;
                });
            }
        });

        async function performConvert() {
            const amount = parseFloat(amountInput.value);
            if (isNaN(amount) || amount <= 0) {
                showToast("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­");
                return;
            }

            resultBox.classList.remove('show');
            setLoading(true);

            try {
                const rates = await fetchRatesWithFallback();
                
                if (rates) {
                    cachedRates = rates;
                    const rateFrom = rates[selectedFrom] || 1;
                    const rateTo = rates[selectedTo] || 1;
                    const conversionRate = rateTo / rateFrom;
                    const totalMarket = amount * conversionRate;

                    setTimeout(() => {
                        // === Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù…Ù† Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± ÙÙ‚Ø· ===
                        // Ø§Ù„Ø´Ø±Ø·: Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ù…ØµØ¯Ø± (Ù…Ù†) Ù‡ÙŠ Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±
                        const isConvertingFromUSD = (selectedFrom === 'USD' && selectedTo !== 'USD');

                        if (isConvertingFromUSD) {
                            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ø²Ø¯ÙˆØ¬Ø© (Ù…Ø¨ÙŠØ¹/Ø´Ø±Ø§Ø¡) Ù„Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø³ÙˆØ±ÙŠ
                            singleResultDiv.style.display = 'none';
                            dualResultDiv.style.display = 'block';

                            // Ø­Ø³Ø§Ø¨ Ø§Ù„ÙØ±Ù‚ (Spread) Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø³ÙˆØ±ÙŠ
                            // Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ© Ù„Ù‡Ø§ Ø³Ø¨Ø±ÙŠØ¯ Ø¹Ø§Ù„ÙŠØŒ Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰ Ø£Ù‚Ù„
                            let spreadPercentage = 0.01; // Ø§ÙØªØ±Ø§Ø¶ÙŠ 1%

                            if (selectedTo === 'SYP') {
                                // Ø³ÙˆÙ‚ Ø³ÙˆØ±ÙŠØ§: ÙØ±Ù‚ ÙƒØ¨ÙŠØ± Ø¨ÙŠÙ† Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡ ÙˆØ§Ù„Ø¨ÙŠØ¹ (Ø­ÙˆØ§Ù„ÙŠ 2-4%)
                                spreadPercentage = 0.025; // 2.5% ÙØ±Ù‚ Ø¥Ø¬Ù…Ø§Ù„ÙŠ (1.25% Ù„ÙƒÙ„ Ø§ØªØ¬Ø§Ù‡)
                            } else if (selectedTo === 'TRY') {
                                // Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„ØªØ±ÙƒÙŠØ© Ø£Ù‚Ù„ ØªÙ‚Ù„Ø¨Ø§Ù‹
                                spreadPercentage = 0.015; // 1.5%
                            }
                            
                            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¨Ø§Ù„Øº Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø¨Ø±ÙŠØ¯
                            // Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡ (Ø§Ù„ØµØ±Ø§Ù ÙŠØ´ØªØ±ÙŠ Ù…Ù†Ùƒ): Ø£Ù‚Ù„
                            // Ø³Ø¹Ø± Ø§Ù„Ù…Ø¨ÙŠØ¹ (Ø§Ù„ØµØ±Ø§Ù ÙŠØ¨ÙŠØ¹ Ù„Ùƒ): Ø£Ø¹Ù„Ù‰
                            const totalSell = totalMarket * (1 - spreadPercentage/2);
                            const totalBuy = totalMarket * (1 + spreadPercentage/2);

                            const formatNum = (num) => new Intl.NumberFormat('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }).format(num);
                            
                            resSell.textContent = formatNum(totalSell);
                            resBuy.textContent = formatNum(totalBuy);
                            
                            const lowRate = conversionRate * (1 - spreadPercentage/2);
                            const highRate = conversionRate * (1 + spreadPercentage/2);
                            dualRateDisplay.textContent = `1 ${selectedFrom} â‰ˆ ${lowRate.toFixed(5)} - ${highRate.toFixed(5)} ${selectedTo}`;

                        } else {
                            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø¹Ø§Ø¯ÙŠØ© (Ù„Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¹ÙƒØ³ÙŠ Ø£Ùˆ ØºÙŠØ± Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±)
                            singleResultDiv.style.display = 'block';
                            dualResultDiv.style.display = 'none';
                            animateResult(totalMarket, conversionRate);
                        }
                        
                        resultBox.classList.add('show');
                    }, 200);
                } else {
                    showToast("ÙØ´Ù„ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØµØ§Ø¯Ø±");
                }
            } catch (error) {
                console.error(error);
                showToast("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.");
            } finally {
                setLoading(false);
            }
        }

        function animateResult(targetValue, rate) {
            rateDisplay.textContent = `1 ${selectedFrom} = ${rate.toFixed(5)} ${selectedTo}`;
            
            const duration = 1000;
            const startValue = 0;
            const startTime = performance.now();

            function update(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const ease = 1 - Math.pow(1 - progress, 3);
                const currentVal = startValue + (targetValue - startValue) * ease;
                
                const formatted = new Intl.NumberFormat('en-US', {
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                }).format(currentVal);
                
                resultAmount.textContent = formatted;
                if (progress < 1) requestAnimationFrame(update);
            }
            requestAnimationFrame(update);
        }

        function setLoading(isLoading) {
            if (isLoading) {
                convertBtn.disabled = true;
                btnText.style.display = 'none';
                loader.style.display = 'block';
            } else {
                convertBtn.disabled = false;
                btnText.style.display = 'block';
                loader.style.display = 'none';
            }
        }

        function showToast(msg) {
            toast.textContent = msg;
            toast.classList.add('active');
            setTimeout(() => toast.classList.remove('active'), 3000);
        }

        // === ÙˆØ¸ÙŠÙØ© Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø°Ù‡Ø¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ===
        function calculateGoldValue() {
            const weight = parseFloat(document.getElementById('calc-weight').value);
            const karat = parseInt(document.getElementById('calc-karat').value);
            const targetCurrency = document.getElementById('calc-currency').value;
            
            if (!weight || weight <= 0) {
                showToast("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ÙˆØ²Ù† Ø¨Ø§Ù„ØºØ±Ø§Ù…");
                return;
            }

            if (currentGoldPriceUsdPerGram === 0) {
                showToast("Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ« Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø°Ù‡Ø¨ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù„Ø­Ø¸Ø© ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰");
                fetchGoldAndSilver();
                return;
            }

            const price24kUsd = currentGoldPriceUsdPerGram;
            const priceKaratUsd = price24kUsd * (karat / 24);

            let exchangeRate = 1;
            let currencySymbol = "$";

            if (targetCurrency === 'SYP') {
                exchangeRate = cachedRates['SYP'];
                currencySymbol = "Ù„.Ø³";
            } else if (targetCurrency === 'TRY') {
                exchangeRate = cachedRates['TRY'];
                currencySymbol = "â‚º";
            } else {
                currencySymbol = "$";
            }

            const totalValue = weight * priceKaratUsd * exchangeRate;
            const resultBox = document.getElementById('calc-result-box');
            const resultAmount = document.getElementById('calc-result-amount');
            const currencyLabel = document.getElementById('calc-currency-label');

            let formattedValue;
            if (targetCurrency === 'SYP') {
                formattedValue = new Intl.NumberFormat('en-US', { maximumFractionDigits: 0 }).format(totalValue);
            } else {
                formattedValue = new Intl.NumberFormat('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }).format(totalValue);
            }

            resultAmount.textContent = formattedValue;
            currencyLabel.textContent = targetCurrency;

            resultBox.classList.add('show');
        }


        async function fetchGoldAndSilver() {
            const loaderContainer = document.getElementById('gold-loader-container');
            const content = document.getElementById('gold-content');
            
            loaderContainer.style.display = 'flex';
            content.style.display = 'none';

            let goldUsdPerOunce = null;
            let silverUsdPerOunce = null;

            try {
                let rates = cachedRates;
                if (!rates || !rates['SYP']) {
                    rates = await fetchRatesWithFallback();
                    cachedRates = rates;
                }

                if (rates) {
                    goldUsdPerOunce = rates['XAU'];
                    silverUsdPerOunce = rates['XAG'];
                }

                if (!goldUsdPerOunce) {
                    try {
                        const paxgRes = await fetch('https://api.binance.com/api/v3/ticker/price?symbol=PAXGUSDT');
                        const paxgData = await paxgRes.json();
                        goldUsdPerOunce = parseFloat(paxgData.price);
                    } catch (e) { }
                }

                if (goldUsdPerOunce && rates['SYP']) {
                    currentGoldPriceUsdPerGram = goldUsdPerOunce / 31.1035;

                    const sypRate = rates['SYP'];
                    const goldUsdPerGram = goldUsdPerOunce / 31.1035;
                    const goldSypPerOunce = goldUsdPerOunce * sypRate;
                    const goldSypPerGram = goldSypPerOunce / 31.1035;
                    const gold21SypPerGram = goldSypPerGram * (21/24);

                    document.getElementById('gold-ounce-usd').textContent = `$${goldUsdPerOunce.toLocaleString(undefined, {minimumFractionDigits:2})}`;
                    document.getElementById('gold-gram-usd').textContent = `$${goldUsdPerGram.toFixed(2)}`;
                    
                    document.getElementById('gold-ounce-syp').textContent = goldSypPerOunce.toLocaleString('en-US', {maximumFractionDigits:0});
                    document.getElementById('gold-21-syp').textContent = gold21SypPerGram.toLocaleString('en-US', {maximumFractionDigits:0});

                    if (silverUsdPerOunce) {
                        const silverUsdPerGram = silverUsdPerOunce / 31.1035;
                        document.getElementById('silver-ounce-usd').textContent = `$${silverUsdPerOunce.toFixed(2)}`;
                        document.getElementById('silver-gram-usd').textContent = `$${silverUsdPerGram.toFixed(3)}`;
                        document.querySelector('.metal-card.silver').style.display = 'block';
                    } else {
                        document.querySelector('.metal-card.silver').style.display = 'none';
                    }

                    loaderContainer.style.display = 'none';
                    content.style.display = 'block';
                } else {
                    throw new Error("Rates not found");
                }

            } catch (error) {
                loaderContainer.style.display = 'none';
                content.style.display = 'block';
                showToast("ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ù…Ø¹Ø§Ø¯Ù†");
                console.error(error);
            }
        }

    </script>
</body>
</html>
